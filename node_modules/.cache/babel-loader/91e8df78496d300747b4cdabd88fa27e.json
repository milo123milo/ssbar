{"ast":null,"code":"/**\n * vue-lang-router v2.1.1\n * (c) 2021 Radek Altof\n * Released under the MIT License.\n */\nimport { resolveComponent, openBlock, createBlock, mergeProps, withCtx, renderSlot, watch, resolveDynamicComponent, ref } from 'vue';\nimport { createI18n } from 'vue-i18n';\nimport { createRouter } from 'vue-router';\nvar script = {\n  name: 'LocalizedLink',\n  props: ['to'],\n  methods: {\n    localizedTo: function localizedTo() {\n      if (typeof this.to === 'string') {\n        return this.$localizePath(this.to);\n      } else if (typeof this.to === 'object' && typeof this.to.path === 'string') {\n        var o = JSON.parse(JSON.stringify(this.to));\n        o.path = this.$localizePath(o.path);\n        return o;\n      } else {\n        return this.to;\n      }\n    }\n  }\n};\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = resolveComponent(\"router-link\");\n\n  return openBlock(), createBlock(_component_router_link, mergeProps({\n    to: $options.localizedTo()\n  }, _ctx.$attrs), {\n    default: withCtx(function () {\n      return [renderSlot(_ctx.$slots, \"default\")];\n    }),\n    _: 3\n  }, 16, [\"to\"]);\n}\n\nscript.render = render;\nscript.__file = \"src/plugin/components/LocalizedLink.vue\";\nvar script$1 = {\n  name: 'LanguageSwitcher',\n  data: function data() {\n    return {\n      currentUrl: this.url || this.$router.currentRoute.fullPath,\n      links: []\n    };\n  },\n  props: ['tag', 'active-class', 'url'],\n  computed: {\n    locale: function locale() {\n      return this.$i18n.locale;\n    }\n  },\n  methods: {\n    getTag: function getTag() {\n      if (this.tag) {\n        return this.tag;\n      } else {\n        return 'div';\n      }\n    },\n    generateLinks: function generateLinks() {\n      var links = [];\n      var activeClass = this.activeClass || 'router-active-language';\n      var tr = this._langRouter.translations;\n\n      for (var lang in tr) {\n        if (tr.hasOwnProperty(lang)) {\n          links.push({\n            activeClass: lang == this.locale ? activeClass : '',\n            langIndex: lang,\n            langName: tr[lang].name || lang,\n            url: this.$localizePath(this.currentUrl, lang)\n          });\n        }\n      }\n\n      this.links = links;\n    },\n    detectRouterLinkClick: function detectRouterLinkClick(e) {\n      var this$1 = this;\n\n      if (!e.defaultPrevented) {\n        return;\n      }\n\n      var a = e.target;\n\n      while (a.tagName.toLowerCase() != 'a') {\n        if (a.classList.contains('router-language-switcher')) {\n          return;\n        }\n\n        a = a.parentNode;\n      }\n\n      if (a.pathname == window.location.pathname) {\n        return;\n      }\n\n      var currentRoute = this.$route.matched[this.$route.matched.length - 1];\n\n      if (currentRoute.aliasOf) {\n        currentRoute = currentRoute.aliasOf;\n      }\n\n      var resolvedRoute = this.$router.resolve(a.pathname);\n\n      if (resolvedRoute.matched.length == 0) {\n        return;\n      }\n\n      resolvedRoute = resolvedRoute.matched[resolvedRoute.matched.length - 1];\n\n      if (resolvedRoute.aliasOf) {\n        resolvedRoute = resolvedRoute.aliasOf;\n      }\n\n      if (currentRoute == resolvedRoute) {\n        var newRoute = a.pathname + a.search + a.hash;\n        var historyState = Object.assign({}, window.history.state, {\n          current: newRoute\n        });\n        var newLocale = a.pathname.split('/')[1];\n\n        this._langRouter.loadLanguage(newLocale).then(function () {\n          window.history.replaceState(historyState, '', newRoute);\n          this$1._langRouter.forcedNewRoute.value = newRoute;\n        });\n      }\n    }\n  },\n  watch: {\n    $route: function $route(to) {\n      this.currentUrl = this.url || to.fullPath;\n      this.generateLinks();\n    },\n    locale: function locale() {\n      if (typeof this.currentUrl !== 'undefined') {\n        this.generateLinks();\n      }\n    }\n  },\n  mounted: function mounted() {\n    var this$1 = this;\n\n    if (typeof this.currentUrl !== 'undefined') {\n      this.generateLinks();\n    }\n\n    watch(this._langRouter.forcedNewRoute, function (to) {\n      this$1.currentUrl = to;\n      this$1.generateLinks();\n    });\n  }\n};\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(resolveDynamicComponent($options.getTag()), {\n    class: \"router-language-switcher\",\n    onClick: $options.detectRouterLinkClick\n  }, {\n    default: withCtx(function () {\n      return [renderSlot(_ctx.$slots, \"default\", {\n        links: $data.links\n      })];\n    }),\n    _: 3\n  }, 8, [\"onClick\"]);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"src/plugin/components/LanguageSwitcher.vue\";\nvar defaultLanguage, translations, localizedURLs, i18n;\nvar isInstalled = false;\nvar loadedTranslations = [];\n\nfunction err(msg, error) {\n  console.error('LangRouter: ' + msg);\n\n  if (typeof error !== 'undefined') {\n    console.error(error);\n  }\n}\n\nfunction createLangRouter(languageOptions, routerOptions) {\n  setupLanguageConfig(languageOptions);\n\n  for (var lang in translations) {\n    if (translations.hasOwnProperty(lang) && !localizedURLs[lang]) {\n      localizedURLs[lang] = {};\n    }\n  }\n\n  for (var lang$1 in localizedURLs) {\n    if (localizedURLs.hasOwnProperty(lang$1)) {\n      addAliasesToRoutes(routerOptions.routes, lang$1);\n    }\n  }\n\n  var router = createRouter(routerOptions);\n  router.beforeEach(switchLanguage);\n  var installRouter = router.install;\n\n  router.install = function (app, options) {\n    installRouter.call(this, app, options);\n    installLangRouter.call(this, app);\n  };\n\n  return router;\n}\n\nfunction setupLanguageConfig(options) {\n  if (!options) {\n    err('Options missing.');\n  }\n\n  defaultLanguage = options.defaultLanguage;\n  translations = options.translations;\n  localizedURLs = options.localizedURLs || {};\n  var isArr;\n\n  if ((isArr = Array.isArray(translations)) || typeof translations !== 'object') {\n    err('options.translations should be an object, received ' + (isArr ? 'array' : typeof translations) + ' instead.');\n  }\n\n  if ((isArr = Array.isArray(localizedURLs)) || typeof localizedURLs !== 'object') {\n    err('options.localizedURLs should be an object, received ' + (isArr ? 'array' : typeof localizedURLs) + ' instead.');\n  }\n\n  if (typeof defaultLanguage !== 'string') {\n    err('options.defaultLanguage should be a string, received ' + typeof defaultLanguage + ' instead.');\n  }\n\n  var messages = {};\n\n  for (var lang in translations) {\n    if (translations.hasOwnProperty(lang)) {\n      var langMessages = translations[lang].messages;\n\n      if (typeof langMessages === 'object' && !Array.isArray(langMessages)) {\n        messages[lang] = translations[lang].messages;\n        loadedTranslations.push(lang);\n      }\n    }\n  }\n\n  i18n = createI18n(Object.assign({}, {\n    legacy: true,\n    locale: defaultLanguage,\n    fallbackLocale: defaultLanguage,\n    messages: messages\n  }, options.i18nOptions));\n}\n\nfunction installLangRouter(app) {\n  if (isInstalled) {\n    err('Already installed.');\n    return;\n  }\n\n  isInstalled = true;\n  app.config.globalProperties._langRouter = {\n    translations: translations,\n    loadLanguage: loadLanguage,\n    forcedNewRoute: ref('')\n  };\n  app.config.globalProperties.$localizePath = localizePath;\n  app.component('localized-link', script);\n  app.component('language-switcher', script$1);\n}\n\nfunction setLanguage(lang) {\n  i18n.global.locale = lang;\n  document.querySelector('html').setAttribute('lang', lang);\n  localStorage.setItem('VueAppLanguage', lang);\n  return lang;\n}\n\nfunction loadLanguage(lang) {\n  if (loadedTranslations.includes(lang)) {\n    return Promise.resolve(setLanguage(lang));\n  }\n\n  if (!translations[lang] || typeof translations[lang].load !== 'function') {\n    err('Unable to load translations for \"' + lang + '\", \"load\" function is missing!');\n  }\n\n  return translations[lang].load().then(function (messages) {\n    i18n.global.setLocaleMessage(lang, messages.default || messages);\n    loadedTranslations.push(lang);\n    return setLanguage(lang);\n  }).catch(function (error) {\n    err('Failed to load \"' + lang + '\" translation.', error);\n  });\n}\n\nfunction addAliasesToRoutes(routes, lang, child) {\n  routes.forEach(function (route) {\n    var alias = translatePath(route.path, lang);\n\n    if (!child) {\n      alias = '/' + lang + (alias.charAt(0) != '/' ? '/' : '') + alias;\n    }\n\n    if (route.alias) {\n      if (!Array.isArray(route.alias)) {\n        route.alias = [route.alias];\n      }\n    } else {\n      route.alias = [];\n    }\n\n    if (route.path != alias && route.alias.indexOf(alias) == -1) {\n      route.alias.push(alias);\n    }\n\n    if (route.children) {\n      addAliasesToRoutes(route.children, lang, true);\n    }\n  });\n}\n\nfunction switchLanguage(to, from, next) {\n  var lang = to.path.split('/')[1];\n\n  if (!translations[lang]) {\n    var savedLang = localStorage.getItem('VueAppLanguage');\n\n    if (savedLang && translations[savedLang]) {\n      lang = savedLang;\n    } else {\n      var preferredLang = getPrefferedLanguage();\n\n      if (preferredLang && translations[preferredLang]) {\n        lang = preferredLang;\n      } else {\n        lang = defaultLanguage;\n      }\n    }\n\n    if (lang != defaultLanguage) {\n      var translatedPath = translatePath(to.path, lang);\n      translatedPath = '/' + lang + (translatedPath.charAt(0) != '/' ? '/' : '') + translatedPath;\n      return next({\n        path: translatedPath,\n        query: to.query,\n        hash: to.hash\n      });\n    }\n  }\n\n  loadLanguage(lang).then(function () {\n    return next();\n  });\n}\n\nfunction translatePath(path, langTo, langFrom, matchedPath) {\n  var pathChunks = path.split('/');\n\n  if (langFrom && localizedURLs[langFrom]) {\n    if (langTo == langFrom) {\n      return path;\n    }\n\n    var map = localizedURLs[langFrom];\n    var reversedMap = {};\n    Object.keys(map).forEach(function (key) {\n      reversedMap[map[key]] = key;\n    });\n    var matchedPathChunks = matchedPath.split('/');\n\n    for (var i = 0; i < pathChunks.length; i++) {\n      var pathChunk = pathChunks[i];\n\n      if (matchedPathChunks[i].charAt(0) == ':') {\n        continue;\n      }\n\n      pathChunks[i] = reversedMap[pathChunk] || pathChunk;\n    }\n  }\n\n  for (var i$1 = 0; i$1 < pathChunks.length; i$1++) {\n    var pathChunk$1 = pathChunks[i$1];\n\n    if (pathChunk$1.charAt(0) == ':') {\n      continue;\n    }\n\n    pathChunks[i$1] = localizedURLs[langTo][pathChunk$1] || pathChunk$1;\n  }\n\n  return pathChunks.join('/');\n}\n\nfunction getPrefferedLanguage() {\n  function extractLanguage(s) {\n    return s.split('-')[0].toLowerCase();\n  }\n\n  if (navigator.languages && navigator.languages.length) {\n    return extractLanguage(navigator.languages[0] || '');\n  }\n\n  return extractLanguage(navigator.language || navigator.browserLanguage || navigator.userLanguage || '');\n}\n\nfunction localizePath(fullPath, lang) {\n  if (!lang || !localizedURLs[lang]) {\n    lang = i18n.global.locale;\n  }\n\n  var path = fullPath;\n  var query = '';\n\n  if (fullPath.includes('?')) {\n    path = fullPath.split('?')[0];\n    query = '?' + fullPath.split('?')[1];\n  } else if (fullPath.includes('#')) {\n    path = fullPath.split('#')[0];\n    query = '#' + fullPath.split('#')[1];\n  }\n\n  var pathChunks = path.split('/');\n  var pathLang = localizedURLs[pathChunks[1]] ? pathChunks[1] : false;\n  var currentPathLang = this.$route.path.split('/')[1];\n\n  if (lang == defaultLanguage && !localizedURLs[currentPathLang] && !pathLang) {\n    return fullPath;\n  }\n\n  var resolvedPath = false;\n\n  if (pathLang) {\n    var resolvedRoute = this.$router.resolve(path);\n\n    if (resolvedRoute.matched.length != 0) {\n      resolvedPath = resolvedRoute.matched[resolvedRoute.matched.length - 1];\n      resolvedPath = resolvedPath.aliasOf ? resolvedPath.aliasOf.path : resolvedPath.path;\n      resolvedPath = resolvedPath.charAt(0) == '/' ? resolvedPath : '/' + resolvedPath;\n    } else {\n      err('Router could not resolve path \"' + path + '\". URL localization may not work as expected.');\n    }\n\n    pathChunks.splice(1, 1);\n    path = pathChunks.join('/');\n  }\n\n  var translatedPath = translatePath(path, lang, pathLang, resolvedPath || path);\n  translatedPath = '/' + lang + (translatedPath.charAt(0) != '/' ? '/' : '') + translatedPath;\n  return translatedPath + query;\n}\n\nvar jestAccess = function () {\n  return true;\n};\n\nexport default jestAccess;\nexport { createLangRouter, i18n };","map":{"version":3,"sources":["/Users/milo/Documents/Diverse/meteo ui/stbar2/node_modules/vue-lang-router/dist/lang-router.esm.js"],"names":["resolveComponent","openBlock","createBlock","mergeProps","withCtx","renderSlot","watch","resolveDynamicComponent","ref","createI18n","createRouter","script","name","props","methods","localizedTo","to","$localizePath","path","o","JSON","parse","stringify","render","_ctx","_cache","$props","$setup","$data","$options","_component_router_link","$attrs","default","$slots","_","__file","script$1","data","currentUrl","url","$router","currentRoute","fullPath","links","computed","locale","$i18n","getTag","tag","generateLinks","activeClass","tr","_langRouter","translations","lang","hasOwnProperty","push","langIndex","langName","detectRouterLinkClick","e","this$1","defaultPrevented","a","target","tagName","toLowerCase","classList","contains","parentNode","pathname","window","location","$route","matched","length","aliasOf","resolvedRoute","resolve","newRoute","search","hash","historyState","Object","assign","history","state","current","newLocale","split","loadLanguage","then","replaceState","forcedNewRoute","value","mounted","render$1","class","onClick","defaultLanguage","localizedURLs","i18n","isInstalled","loadedTranslations","err","msg","error","console","createLangRouter","languageOptions","routerOptions","setupLanguageConfig","lang$1","addAliasesToRoutes","routes","router","beforeEach","switchLanguage","installRouter","install","app","options","call","installLangRouter","isArr","Array","isArray","messages","langMessages","legacy","fallbackLocale","i18nOptions","config","globalProperties","localizePath","component","setLanguage","global","document","querySelector","setAttribute","localStorage","setItem","includes","Promise","load","setLocaleMessage","catch","child","forEach","route","alias","translatePath","charAt","indexOf","children","from","next","savedLang","getItem","preferredLang","getPrefferedLanguage","translatedPath","query","langTo","langFrom","matchedPath","pathChunks","map","reversedMap","keys","key","matchedPathChunks","i","pathChunk","i$1","pathChunk$1","join","extractLanguage","s","navigator","languages","language","browserLanguage","userLanguage","pathLang","currentPathLang","resolvedPath","splice","jestAccess"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAEA,SAASA,gBAAT,EAA2BC,SAA3B,EAAsCC,WAAtC,EAAmDC,UAAnD,EAA+DC,OAA/D,EAAwEC,UAAxE,EAAoFC,KAApF,EAA2FC,uBAA3F,EAAoHC,GAApH,QAA+H,KAA/H;AACA,SAASC,UAAT,QAA2B,UAA3B;AACA,SAASC,YAAT,QAA6B,YAA7B;AAEA,IAAIC,MAAM,GAAG;AACZC,EAAAA,IAAI,EAAE,eADM;AAEZC,EAAAA,KAAK,EAAE,CAAE,IAAF,CAFK;AAGZC,EAAAA,OAAO,EAAE;AACRC,IAAAA,WAAW,EAAE,SAASA,WAAT,GAAwB;AACpC,UAAI,OAAO,KAAKC,EAAZ,KAAmB,QAAvB,EAAiC;AAChC,eAAO,KAAKC,aAAL,CAAmB,KAAKD,EAAxB,CAAP;AACA,OAFD,MAGK,IAAI,OAAO,KAAKA,EAAZ,KAAmB,QAAnB,IAA+B,OAAO,KAAKA,EAAL,CAAQE,IAAf,KAAwB,QAA3D,EAAqE;AACzE,YAAIC,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKN,EAApB,CAAX,CAAR;AACAG,QAAAA,CAAC,CAACD,IAAF,GAAS,KAAKD,aAAL,CAAmBE,CAAC,CAACD,IAArB,CAAT;AACA,eAAOC,CAAP;AACA,OAJI,MAKA;AACJ,eAAO,KAAKH,EAAZ;AACA;AACD;AAbO;AAHG,CAAb;;AAoBA,SAASO,MAAT,CAAgBC,IAAhB,EAAsBC,MAAtB,EAA8BC,MAA9B,EAAsCC,MAAtC,EAA8CC,KAA9C,EAAqDC,QAArD,EAA+D;AAC7D,MAAIC,sBAAsB,GAAG9B,gBAAgB,CAAC,aAAD,CAA7C;;AACA,SAAQC,SAAS,IAAIC,WAAW,CAAC4B,sBAAD,EAAyB3B,UAAU,CAAC;AAClEa,IAAAA,EAAE,EAAEa,QAAQ,CAACd,WAAT;AAD8D,GAAD,EAEhES,IAAI,CAACO,MAF2D,CAAnC,EAEf;AACfC,IAAAA,OAAO,EAAE5B,OAAO,CAAC,YAAY;AAAE,aAAO,CACpCC,UAAU,CAACmB,IAAI,CAACS,MAAN,EAAc,SAAd,CAD0B,CAAP;AAE3B,KAFY,CADD;AAIfC,IAAAA,CAAC,EAAE;AAJY,GAFe,EAO7B,EAP6B,EAOxB,CAAC,IAAD,CAPwB,CAAhC;AAQD;;AAEDvB,MAAM,CAACY,MAAP,GAAgBA,MAAhB;AACAZ,MAAM,CAACwB,MAAP,GAAgB,yCAAhB;AAEA,IAAIC,QAAQ,GAAG;AACdxB,EAAAA,IAAI,EAAE,kBADQ;AAEdyB,EAAAA,IAAI,EAAE,SAASA,IAAT,GAAiB;AACtB,WAAO;AACNC,MAAAA,UAAU,EAAE,KAAKC,GAAL,IAAY,KAAKC,OAAL,CAAaC,YAAb,CAA0BC,QAD5C;AAENC,MAAAA,KAAK,EAAE;AAFD,KAAP;AAIA,GAPa;AAQd9B,EAAAA,KAAK,EAAE,CAAE,KAAF,EAAS,cAAT,EAAyB,KAAzB,CARO;AASd+B,EAAAA,QAAQ,EAAE;AACTC,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAmB;AAC1B,aAAO,KAAKC,KAAL,CAAWD,MAAlB;AACA;AAHQ,GATI;AAcd/B,EAAAA,OAAO,EAAE;AACRiC,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAmB;AAC1B,UAAI,KAAKC,GAAT,EAAc;AAAE,eAAO,KAAKA,GAAZ;AAAkB,OAAlC,MACK;AAAE,eAAO,KAAP;AAAe;AACtB,KAJO;AAKRC,IAAAA,aAAa,EAAE,SAASA,aAAT,GAA0B;AACxC,UAAIN,KAAK,GAAG,EAAZ;AACA,UAAIO,WAAW,GAAG,KAAKA,WAAL,IAAoB,wBAAtC;AACA,UAAIC,EAAE,GAAG,KAAKC,WAAL,CAAiBC,YAA1B;;AACA,WAAK,IAAIC,IAAT,IAAiBH,EAAjB,EAAqB;AACpB,YAAIA,EAAE,CAACI,cAAH,CAAkBD,IAAlB,CAAJ,EAA6B;AAC5BX,UAAAA,KAAK,CAACa,IAAN,CAAW;AACVN,YAAAA,WAAW,EAAGI,IAAI,IAAI,KAAKT,MAAb,GAAsBK,WAAtB,GAAoC,EADxC;AAEVO,YAAAA,SAAS,EAAEH,IAFD;AAGVI,YAAAA,QAAQ,EAAEP,EAAE,CAACG,IAAD,CAAF,CAAS1C,IAAT,IAAiB0C,IAHjB;AAIVf,YAAAA,GAAG,EAAE,KAAKtB,aAAL,CAAmB,KAAKqB,UAAxB,EAAoCgB,IAApC;AAJK,WAAX;AAMA;AACD;;AACD,WAAKX,KAAL,GAAaA,KAAb;AACA,KApBO;AAqBRgB,IAAAA,qBAAqB,EAAE,SAASA,qBAAT,CAAgCC,CAAhC,EAAmC;AACzD,UAAIC,MAAM,GAAG,IAAb;;AACA,UAAI,CAACD,CAAC,CAACE,gBAAP,EAAyB;AAAE;AAAS;;AACpC,UAAIC,CAAC,GAAGH,CAAC,CAACI,MAAV;;AACA,aAAOD,CAAC,CAACE,OAAF,CAAUC,WAAV,MAA2B,GAAlC,EAAuC;AACtC,YAAIH,CAAC,CAACI,SAAF,CAAYC,QAAZ,CAAqB,0BAArB,CAAJ,EAAsD;AAAE;AAAS;;AACjEL,QAAAA,CAAC,GAAGA,CAAC,CAACM,UAAN;AACA;;AACD,UAAIN,CAAC,CAACO,QAAF,IAAcC,MAAM,CAACC,QAAP,CAAgBF,QAAlC,EAA4C;AAAE;AAAS;;AACvD,UAAI7B,YAAY,GAAG,KAAKgC,MAAL,CAAYC,OAAZ,CAAoB,KAAKD,MAAL,CAAYC,OAAZ,CAAoBC,MAApB,GAA6B,CAAjD,CAAnB;;AACA,UAAIlC,YAAY,CAACmC,OAAjB,EAA0B;AAAEnC,QAAAA,YAAY,GAAGA,YAAY,CAACmC,OAA5B;AAAsC;;AAClE,UAAIC,aAAa,GAAG,KAAKrC,OAAL,CAAasC,OAAb,CAAqBf,CAAC,CAACO,QAAvB,CAApB;;AACA,UAAIO,aAAa,CAACH,OAAd,CAAsBC,MAAtB,IAAgC,CAApC,EAAuC;AAAE;AAAS;;AAClDE,MAAAA,aAAa,GAAGA,aAAa,CAACH,OAAd,CAAsBG,aAAa,CAACH,OAAd,CAAsBC,MAAtB,GAA+B,CAArD,CAAhB;;AACA,UAAIE,aAAa,CAACD,OAAlB,EAA2B;AAAEC,QAAAA,aAAa,GAAGA,aAAa,CAACD,OAA9B;AAAwC;;AACrE,UAAInC,YAAY,IAAIoC,aAApB,EAAmC;AAClC,YAAIE,QAAQ,GAAGhB,CAAC,CAACO,QAAF,GAAaP,CAAC,CAACiB,MAAf,GAAwBjB,CAAC,CAACkB,IAAzC;AACA,YAAIC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,MAAM,CAACc,OAAP,CAAeC,KAAjC,EAAwC;AAACC,UAAAA,OAAO,EAAER;AAAV,SAAxC,CAAnB;AACA,YAAIS,SAAS,GAAGzB,CAAC,CAACO,QAAF,CAAWmB,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAhB;;AACA,aAAKrC,WAAL,CAAiBsC,YAAjB,CAA8BF,SAA9B,EAAyCG,IAAzC,CAA8C,YAAY;AACzDpB,UAAAA,MAAM,CAACc,OAAP,CAAeO,YAAf,CAA4BV,YAA5B,EAA0C,EAA1C,EAA8CH,QAA9C;AACAlB,UAAAA,MAAM,CAACT,WAAP,CAAmByC,cAAnB,CAAkCC,KAAlC,GAA0Cf,QAA1C;AACA,SAHD;AAIA;AACD;AA7CO,GAdK;AA6DdzE,EAAAA,KAAK,EAAE;AACNmE,IAAAA,MAAM,EAAE,SAASA,MAAT,CAAiBzD,EAAjB,EAAqB;AAC5B,WAAKsB,UAAL,GAAkB,KAAKC,GAAL,IAAYvB,EAAE,CAAC0B,QAAjC;AACA,WAAKO,aAAL;AACA,KAJK;AAKNJ,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAmB;AAC1B,UAAI,OAAO,KAAKP,UAAZ,KAA2B,WAA/B,EAA4C;AAAE,aAAKW,aAAL;AAAuB;AACrE;AAPK,GA7DO;AAsEd8C,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAoB;AAC5B,QAAIlC,MAAM,GAAG,IAAb;;AACA,QAAI,OAAO,KAAKvB,UAAZ,KAA2B,WAA/B,EAA4C;AAAE,WAAKW,aAAL;AAAuB;;AACrE3C,IAAAA,KAAK,CAAC,KAAK8C,WAAL,CAAiByC,cAAlB,EAAkC,UAAU7E,EAAV,EAAc;AACpD6C,MAAAA,MAAM,CAACvB,UAAP,GAAoBtB,EAApB;AACA6C,MAAAA,MAAM,CAACZ,aAAP;AACA,KAHI,CAAL;AAIA;AA7Ea,CAAf;;AAgFA,SAAS+C,QAAT,CAAkBxE,IAAlB,EAAwBC,MAAxB,EAAgCC,MAAhC,EAAwCC,MAAxC,EAAgDC,KAAhD,EAAuDC,QAAvD,EAAiE;AAC/D,SAAQ5B,SAAS,IAAIC,WAAW,CAACK,uBAAuB,CAACsB,QAAQ,CAACkB,MAAT,EAAD,CAAxB,EAA6C;AAC3EkD,IAAAA,KAAK,EAAE,0BADoE;AAE3EC,IAAAA,OAAO,EAAErE,QAAQ,CAAC8B;AAFyD,GAA7C,EAG7B;AACD3B,IAAAA,OAAO,EAAE5B,OAAO,CAAC,YAAY;AAAE,aAAO,CACpCC,UAAU,CAACmB,IAAI,CAACS,MAAN,EAAc,SAAd,EAAyB;AAAEU,QAAAA,KAAK,EAAEf,KAAK,CAACe;AAAf,OAAzB,CAD0B,CAAP;AAE3B,KAFY,CADf;AAIDT,IAAAA,CAAC,EAAE;AAJF,GAH6B,EAQ7B,CAR6B,EAQzB,CAAC,SAAD,CARyB,CAAhC;AASD;;AAEDE,QAAQ,CAACb,MAAT,GAAkByE,QAAlB;AACA5D,QAAQ,CAACD,MAAT,GAAkB,4CAAlB;AAEA,IAAIgE,eAAJ,EAAqB9C,YAArB,EAAmC+C,aAAnC,EAAkDC,IAAlD;AACA,IAAIC,WAAW,GAAG,KAAlB;AACA,IAAIC,kBAAkB,GAAG,EAAzB;;AACA,SAASC,GAAT,CAAcC,GAAd,EAAmBC,KAAnB,EAA0B;AACzBC,EAAAA,OAAO,CAACD,KAAR,CAAc,iBAAiBD,GAA/B;;AACA,MAAI,OAAOC,KAAP,KAAiB,WAArB,EAAkC;AAAEC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AAAuB;AAC3D;;AACD,SAASE,gBAAT,CAA2BC,eAA3B,EAA4CC,aAA5C,EAA2D;AAC1DC,EAAAA,mBAAmB,CAACF,eAAD,CAAnB;;AACA,OAAK,IAAIvD,IAAT,IAAiBD,YAAjB,EAA+B;AAC9B,QAAIA,YAAY,CAACE,cAAb,CAA4BD,IAA5B,KAAqC,CAAC8C,aAAa,CAAC9C,IAAD,CAAvD,EAA+D;AAC9D8C,MAAAA,aAAa,CAAC9C,IAAD,CAAb,GAAsB,EAAtB;AACA;AACD;;AACD,OAAK,IAAI0D,MAAT,IAAmBZ,aAAnB,EAAkC;AACjC,QAAIA,aAAa,CAAC7C,cAAd,CAA6ByD,MAA7B,CAAJ,EAA0C;AACzCC,MAAAA,kBAAkB,CAACH,aAAa,CAACI,MAAf,EAAuBF,MAAvB,CAAlB;AACA;AACD;;AACD,MAAIG,MAAM,GAAGzG,YAAY,CAACoG,aAAD,CAAzB;AACAK,EAAAA,MAAM,CAACC,UAAP,CAAkBC,cAAlB;AACA,MAAIC,aAAa,GAAGH,MAAM,CAACI,OAA3B;;AACAJ,EAAAA,MAAM,CAACI,OAAP,GAAiB,UAAUC,GAAV,EAAeC,OAAf,EAAwB;AACxCH,IAAAA,aAAa,CAACI,IAAd,CAAmB,IAAnB,EAAyBF,GAAzB,EAA8BC,OAA9B;AACAE,IAAAA,iBAAiB,CAACD,IAAlB,CAAuB,IAAvB,EAA6BF,GAA7B;AACA,GAHD;;AAIA,SAAOL,MAAP;AACA;;AACD,SAASJ,mBAAT,CAA8BU,OAA9B,EAAuC;AACtC,MAAI,CAACA,OAAL,EAAc;AACbjB,IAAAA,GAAG,CAAC,kBAAD,CAAH;AACA;;AACDL,EAAAA,eAAe,GAAGsB,OAAO,CAACtB,eAA1B;AACA9C,EAAAA,YAAY,GAAGoE,OAAO,CAACpE,YAAvB;AACA+C,EAAAA,aAAa,GAAGqB,OAAO,CAACrB,aAAR,IAAyB,EAAzC;AACA,MAAIwB,KAAJ;;AACA,MAAI,CAACA,KAAK,GAAGC,KAAK,CAACC,OAAN,CAAczE,YAAd,CAAT,KAAyC,OAAOA,YAAP,KAAwB,QAArE,EAA+E;AAC9EmD,IAAAA,GAAG,CAAC,yDAAyDoB,KAAK,GAAG,OAAH,GAAa,OAAOvE,YAAlF,IAAkG,WAAnG,CAAH;AACA;;AACD,MAAI,CAACuE,KAAK,GAAGC,KAAK,CAACC,OAAN,CAAc1B,aAAd,CAAT,KAA0C,OAAOA,aAAP,KAAyB,QAAvE,EAAiF;AAChFI,IAAAA,GAAG,CAAC,0DAA0DoB,KAAK,GAAG,OAAH,GAAa,OAAOxB,aAAnF,IAAoG,WAArG,CAAH;AACA;;AACD,MAAI,OAAOD,eAAP,KAA2B,QAA/B,EAAyC;AACxCK,IAAAA,GAAG,CAAC,0DAA0D,OAAOL,eAAjE,GAAmF,WAApF,CAAH;AACA;;AACD,MAAI4B,QAAQ,GAAG,EAAf;;AACA,OAAK,IAAIzE,IAAT,IAAiBD,YAAjB,EAA+B;AAC9B,QAAIA,YAAY,CAACE,cAAb,CAA4BD,IAA5B,CAAJ,EAAuC;AACtC,UAAI0E,YAAY,GAAG3E,YAAY,CAACC,IAAD,CAAZ,CAAmByE,QAAtC;;AACA,UAAI,OAAOC,YAAP,KAAwB,QAAxB,IAAoC,CAACH,KAAK,CAACC,OAAN,CAAcE,YAAd,CAAzC,EAAsE;AACrED,QAAAA,QAAQ,CAACzE,IAAD,CAAR,GAAiBD,YAAY,CAACC,IAAD,CAAZ,CAAmByE,QAApC;AACAxB,QAAAA,kBAAkB,CAAC/C,IAAnB,CAAwBF,IAAxB;AACA;AACD;AACD;;AACD+C,EAAAA,IAAI,GAAG5F,UAAU,CAAC0E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB;AAAC6C,IAAAA,MAAM,EAAE,IAAT;AACnCpF,IAAAA,MAAM,EAAEsD,eAD2B;AAEnC+B,IAAAA,cAAc,EAAE/B,eAFmB;AAGnC4B,IAAAA,QAAQ,EAAEA;AAHyB,GAAlB,EAIjBN,OAAO,CAACU,WAJS,CAAD,CAAjB;AAKA;;AACD,SAASR,iBAAT,CAA4BH,GAA5B,EAAiC;AAChC,MAAIlB,WAAJ,EAAiB;AAChBE,IAAAA,GAAG,CAAC,oBAAD,CAAH;AACA;AACA;;AACDF,EAAAA,WAAW,GAAG,IAAd;AACAkB,EAAAA,GAAG,CAACY,MAAJ,CAAWC,gBAAX,CAA4BjF,WAA5B,GAA0C;AACzCC,IAAAA,YAAY,EAAEA,YAD2B;AAEzCqC,IAAAA,YAAY,EAAEA,YAF2B;AAGzCG,IAAAA,cAAc,EAAErF,GAAG,CAAC,EAAD;AAHsB,GAA1C;AAKAgH,EAAAA,GAAG,CAACY,MAAJ,CAAWC,gBAAX,CAA4BpH,aAA5B,GAA4CqH,YAA5C;AACAd,EAAAA,GAAG,CAACe,SAAJ,CAAc,gBAAd,EAAgC5H,MAAhC;AACA6G,EAAAA,GAAG,CAACe,SAAJ,CAAc,mBAAd,EAAmCnG,QAAnC;AACA;;AACD,SAASoG,WAAT,CAAsBlF,IAAtB,EAA4B;AAC3B+C,EAAAA,IAAI,CAACoC,MAAL,CAAY5F,MAAZ,GAAqBS,IAArB;AACAoF,EAAAA,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BC,YAA/B,CAA4C,MAA5C,EAAoDtF,IAApD;AACAuF,EAAAA,YAAY,CAACC,OAAb,CAAqB,gBAArB,EAAuCxF,IAAvC;AACA,SAAOA,IAAP;AACA;;AACD,SAASoC,YAAT,CAAuBpC,IAAvB,EAA6B;AAC5B,MAAIiD,kBAAkB,CAACwC,QAAnB,CAA4BzF,IAA5B,CAAJ,EAAuC;AACtC,WAAO0F,OAAO,CAAClE,OAAR,CAAgB0D,WAAW,CAAClF,IAAD,CAA3B,CAAP;AACA;;AACD,MAAI,CAACD,YAAY,CAACC,IAAD,CAAb,IAAuB,OAAOD,YAAY,CAACC,IAAD,CAAZ,CAAmB2F,IAA1B,KAAmC,UAA9D,EAA0E;AACzEzC,IAAAA,GAAG,CAAC,sCAAsClD,IAAtC,GAA6C,gCAA9C,CAAH;AACA;;AACD,SAAOD,YAAY,CAACC,IAAD,CAAZ,CAAmB2F,IAAnB,GAA0BtD,IAA1B,CAA+B,UAAUoC,QAAV,EAAoB;AACzD1B,IAAAA,IAAI,CAACoC,MAAL,CAAYS,gBAAZ,CAA6B5F,IAA7B,EAAmCyE,QAAQ,CAAC/F,OAAT,IAAoB+F,QAAvD;AACAxB,IAAAA,kBAAkB,CAAC/C,IAAnB,CAAwBF,IAAxB;AACA,WAAOkF,WAAW,CAAClF,IAAD,CAAlB;AACA,GAJM,EAIJ6F,KAJI,CAIE,UAAUzC,KAAV,EAAiB;AACzBF,IAAAA,GAAG,CAAC,qBAAqBlD,IAArB,GAA4B,gBAA7B,EAA+CoD,KAA/C,CAAH;AACA,GANM,CAAP;AAOA;;AACD,SAASO,kBAAT,CAA6BC,MAA7B,EAAqC5D,IAArC,EAA2C8F,KAA3C,EAAkD;AACjDlC,EAAAA,MAAM,CAACmC,OAAP,CAAe,UAAUC,KAAV,EAAiB;AAC/B,QAAIC,KAAK,GAAGC,aAAa,CAACF,KAAK,CAACpI,IAAP,EAAaoC,IAAb,CAAzB;;AACA,QAAI,CAAC8F,KAAL,EAAY;AAAEG,MAAAA,KAAK,GAAG,MAAMjG,IAAN,IAAciG,KAAK,CAACE,MAAN,CAAa,CAAb,KAAmB,GAAnB,GAAyB,GAAzB,GAA+B,EAA7C,IAAmDF,KAA3D;AAAmE;;AACjF,QAAID,KAAK,CAACC,KAAV,EAAiB;AAChB,UAAI,CAAC1B,KAAK,CAACC,OAAN,CAAcwB,KAAK,CAACC,KAApB,CAAL,EAAiC;AAAED,QAAAA,KAAK,CAACC,KAAN,GAAc,CAAED,KAAK,CAACC,KAAR,CAAd;AAAgC;AACnE,KAFD,MAGK;AAAED,MAAAA,KAAK,CAACC,KAAN,GAAc,EAAd;AAAmB;;AAC1B,QAAID,KAAK,CAACpI,IAAN,IAAcqI,KAAd,IAAuBD,KAAK,CAACC,KAAN,CAAYG,OAAZ,CAAoBH,KAApB,KAA8B,CAAC,CAA1D,EAA6D;AAAED,MAAAA,KAAK,CAACC,KAAN,CAAY/F,IAAZ,CAAiB+F,KAAjB;AAA0B;;AACzF,QAAID,KAAK,CAACK,QAAV,EAAoB;AAAE1C,MAAAA,kBAAkB,CAACqC,KAAK,CAACK,QAAP,EAAiBrG,IAAjB,EAAuB,IAAvB,CAAlB;AAAiD;AACvE,GATD;AAUA;;AACD,SAAS+D,cAAT,CAAyBrG,EAAzB,EAA6B4I,IAA7B,EAAmCC,IAAnC,EAAyC;AACxC,MAAIvG,IAAI,GAAGtC,EAAE,CAACE,IAAH,CAAQuE,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAX;;AACA,MAAI,CAACpC,YAAY,CAACC,IAAD,CAAjB,EAAyB;AACxB,QAAIwG,SAAS,GAAGjB,YAAY,CAACkB,OAAb,CAAqB,gBAArB,CAAhB;;AACA,QAAID,SAAS,IAAIzG,YAAY,CAACyG,SAAD,CAA7B,EAA0C;AAAExG,MAAAA,IAAI,GAAGwG,SAAP;AAAmB,KAA/D,MACK;AACJ,UAAIE,aAAa,GAAGC,oBAAoB,EAAxC;;AACA,UAAID,aAAa,IAAI3G,YAAY,CAAC2G,aAAD,CAAjC,EAAkD;AAAE1G,QAAAA,IAAI,GAAG0G,aAAP;AAAuB,OAA3E,MACK;AAAE1G,QAAAA,IAAI,GAAG6C,eAAP;AAAyB;AAChC;;AACD,QAAI7C,IAAI,IAAI6C,eAAZ,EAA6B;AAC5B,UAAI+D,cAAc,GAAGV,aAAa,CAACxI,EAAE,CAACE,IAAJ,EAAUoC,IAAV,CAAlC;AACA4G,MAAAA,cAAc,GAAG,MAAM5G,IAAN,IAAc4G,cAAc,CAACT,MAAf,CAAsB,CAAtB,KAA4B,GAA5B,GAAkC,GAAlC,GAAwC,EAAtD,IAA4DS,cAA7E;AACA,aAAOL,IAAI,CAAC;AAAE3I,QAAAA,IAAI,EAAEgJ,cAAR;AAAwBC,QAAAA,KAAK,EAAEnJ,EAAE,CAACmJ,KAAlC;AAAyClF,QAAAA,IAAI,EAAEjE,EAAE,CAACiE;AAAlD,OAAD,CAAX;AACA;AACD;;AACDS,EAAAA,YAAY,CAACpC,IAAD,CAAZ,CAAmBqC,IAAnB,CAAwB,YAAY;AACnC,WAAOkE,IAAI,EAAX;AACA,GAFD;AAGA;;AACD,SAASL,aAAT,CAAwBtI,IAAxB,EAA8BkJ,MAA9B,EAAsCC,QAAtC,EAAgDC,WAAhD,EAA6D;AAC5D,MAAIC,UAAU,GAAGrJ,IAAI,CAACuE,KAAL,CAAW,GAAX,CAAjB;;AACA,MAAI4E,QAAQ,IAAIjE,aAAa,CAACiE,QAAD,CAA7B,EAAyC;AACxC,QAAID,MAAM,IAAIC,QAAd,EAAwB;AAAE,aAAOnJ,IAAP;AAAc;;AACxC,QAAIsJ,GAAG,GAAGpE,aAAa,CAACiE,QAAD,CAAvB;AACA,QAAII,WAAW,GAAG,EAAlB;AACAtF,IAAAA,MAAM,CAACuF,IAAP,CAAYF,GAAZ,EAAiBnB,OAAjB,CAAyB,UAAUsB,GAAV,EAAe;AACvCF,MAAAA,WAAW,CAACD,GAAG,CAACG,GAAD,CAAJ,CAAX,GAAwBA,GAAxB;AACA,KAFD;AAGA,QAAIC,iBAAiB,GAAGN,WAAW,CAAC7E,KAAZ,CAAkB,GAAlB,CAAxB;;AACA,SAAK,IAAIoF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,UAAU,CAAC5F,MAA/B,EAAuCkG,CAAC,EAAxC,EAA4C;AAC3C,UAAIC,SAAS,GAAGP,UAAU,CAACM,CAAD,CAA1B;;AACA,UAAID,iBAAiB,CAACC,CAAD,CAAjB,CAAqBpB,MAArB,CAA4B,CAA5B,KAAkC,GAAtC,EAA2C;AAAE;AAAW;;AACxDc,MAAAA,UAAU,CAACM,CAAD,CAAV,GAAgBJ,WAAW,CAACK,SAAD,CAAX,IAA0BA,SAA1C;AACA;AACD;;AACD,OAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGR,UAAU,CAAC5F,MAAnC,EAA2CoG,GAAG,EAA9C,EAAkD;AACjD,QAAIC,WAAW,GAAGT,UAAU,CAACQ,GAAD,CAA5B;;AACA,QAAIC,WAAW,CAACvB,MAAZ,CAAmB,CAAnB,KAAyB,GAA7B,EAAkC;AAAE;AAAW;;AAC/Cc,IAAAA,UAAU,CAACQ,GAAD,CAAV,GAAkB3E,aAAa,CAACgE,MAAD,CAAb,CAAsBY,WAAtB,KAAsCA,WAAxD;AACA;;AACD,SAAOT,UAAU,CAACU,IAAX,CAAgB,GAAhB,CAAP;AACA;;AACD,SAAShB,oBAAT,GAAiC;AAChC,WAASiB,eAAT,CAA0BC,CAA1B,EAA6B;AAC5B,WAAOA,CAAC,CAAC1F,KAAF,CAAQ,GAAR,EAAa,CAAb,EAAgBvB,WAAhB,EAAP;AACA;;AACD,MAAIkH,SAAS,CAACC,SAAV,IAAuBD,SAAS,CAACC,SAAV,CAAoB1G,MAA/C,EAAuD;AAAE,WAAOuG,eAAe,CAACE,SAAS,CAACC,SAAV,CAAoB,CAApB,KAA0B,EAA3B,CAAtB;AAAuD;;AAChH,SAAOH,eAAe,CAACE,SAAS,CAACE,QAAV,IAAsBF,SAAS,CAACG,eAAhC,IAAmDH,SAAS,CAACI,YAA7D,IAA6E,EAA9E,CAAtB;AACA;;AACD,SAASlD,YAAT,CAAuB5F,QAAvB,EAAiCY,IAAjC,EAAuC;AACtC,MAAI,CAACA,IAAD,IAAS,CAAC8C,aAAa,CAAC9C,IAAD,CAA3B,EAAmC;AAAEA,IAAAA,IAAI,GAAG+C,IAAI,CAACoC,MAAL,CAAY5F,MAAnB;AAA4B;;AACjE,MAAI3B,IAAI,GAAGwB,QAAX;AACA,MAAIyH,KAAK,GAAG,EAAZ;;AACA,MAAIzH,QAAQ,CAACqG,QAAT,CAAkB,GAAlB,CAAJ,EAA4B;AAC3B7H,IAAAA,IAAI,GAAGwB,QAAQ,CAAC+C,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAP;AACA0E,IAAAA,KAAK,GAAG,MAAMzH,QAAQ,CAAC+C,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAd;AACA,GAHD,MAIK,IAAI/C,QAAQ,CAACqG,QAAT,CAAkB,GAAlB,CAAJ,EAA4B;AAChC7H,IAAAA,IAAI,GAAGwB,QAAQ,CAAC+C,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAP;AACA0E,IAAAA,KAAK,GAAG,MAAMzH,QAAQ,CAAC+C,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAd;AACA;;AACD,MAAI8E,UAAU,GAAGrJ,IAAI,CAACuE,KAAL,CAAW,GAAX,CAAjB;AACA,MAAIgG,QAAQ,GAAIrF,aAAa,CAACmE,UAAU,CAAC,CAAD,CAAX,CAAb,GAA+BA,UAAU,CAAC,CAAD,CAAzC,GAA+C,KAA/D;AACA,MAAImB,eAAe,GAAG,KAAKjH,MAAL,CAAYvD,IAAZ,CAAiBuE,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CAAtB;;AACA,MAAInC,IAAI,IAAI6C,eAAR,IAA2B,CAACC,aAAa,CAACsF,eAAD,CAAzC,IAA8D,CAACD,QAAnE,EAA6E;AAAE,WAAO/I,QAAP;AAAkB;;AACjG,MAAIiJ,YAAY,GAAG,KAAnB;;AACA,MAAIF,QAAJ,EAAc;AACb,QAAI5G,aAAa,GAAG,KAAKrC,OAAL,CAAasC,OAAb,CAAqB5D,IAArB,CAApB;;AACA,QAAI2D,aAAa,CAACH,OAAd,CAAsBC,MAAtB,IAAgC,CAApC,EAAuC;AACtCgH,MAAAA,YAAY,GAAG9G,aAAa,CAACH,OAAd,CAAsBG,aAAa,CAACH,OAAd,CAAsBC,MAAtB,GAA+B,CAArD,CAAf;AACAgH,MAAAA,YAAY,GAAIA,YAAY,CAAC/G,OAAb,GAAuB+G,YAAY,CAAC/G,OAAb,CAAqB1D,IAA5C,GAAmDyK,YAAY,CAACzK,IAAhF;AACAyK,MAAAA,YAAY,GAAIA,YAAY,CAAClC,MAAb,CAAoB,CAApB,KAA0B,GAA1B,GAAgCkC,YAAhC,GAA+C,MAAMA,YAArE;AACA,KAJD,MAKK;AACJnF,MAAAA,GAAG,CAAC,oCAAoCtF,IAApC,GAA2C,+CAA5C,CAAH;AACA;;AACDqJ,IAAAA,UAAU,CAACqB,MAAX,CAAkB,CAAlB,EAAqB,CAArB;AACA1K,IAAAA,IAAI,GAAGqJ,UAAU,CAACU,IAAX,CAAgB,GAAhB,CAAP;AACA;;AACD,MAAIf,cAAc,GAAGV,aAAa,CAACtI,IAAD,EAAOoC,IAAP,EAAamI,QAAb,EAAwBE,YAAY,IAAIzK,IAAxC,CAAlC;AACAgJ,EAAAA,cAAc,GAAG,MAAM5G,IAAN,IAAc4G,cAAc,CAACT,MAAf,CAAsB,CAAtB,KAA4B,GAA5B,GAAkC,GAAlC,GAAwC,EAAtD,IAA4DS,cAA7E;AACA,SAAOA,cAAc,GAAGC,KAAxB;AACA;;AACD,IAAI0B,UAAU,GAAG,YAAY;AAAE,SAAO,IAAP;AAAc,CAA7C;;AAEA,eAAeA,UAAf;AACA,SAASjF,gBAAT,EAA2BP,IAA3B","sourcesContent":["/**\n * vue-lang-router v2.1.1\n * (c) 2021 Radek Altof\n * Released under the MIT License.\n */\n\nimport { resolveComponent, openBlock, createBlock, mergeProps, withCtx, renderSlot, watch, resolveDynamicComponent, ref } from 'vue';\nimport { createI18n } from 'vue-i18n';\nimport { createRouter } from 'vue-router';\n\nvar script = {\n\tname: 'LocalizedLink',\n\tprops: [ 'to' ],\n\tmethods: {\n\t\tlocalizedTo: function localizedTo () {\n\t\t\tif (typeof this.to === 'string') {\n\t\t\t\treturn this.$localizePath(this.to);\n\t\t\t}\n\t\t\telse if (typeof this.to === 'object' && typeof this.to.path === 'string') {\n\t\t\t\tvar o = JSON.parse(JSON.stringify(this.to));\n\t\t\t\to.path = this.$localizePath(o.path);\n\t\t\t\treturn o;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.to;\n\t\t\t}\n\t\t},\n\t},\n};\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = resolveComponent(\"router-link\");\n  return (openBlock(), createBlock(_component_router_link, mergeProps({\n    to: $options.localizedTo()\n  }, _ctx.$attrs), {\n    default: withCtx(function () { return [\n      renderSlot(_ctx.$slots, \"default\")\n    ]; }),\n    _: 3\n  }, 16 , [\"to\"]))\n}\n\nscript.render = render;\nscript.__file = \"src/plugin/components/LocalizedLink.vue\";\n\nvar script$1 = {\n\tname: 'LanguageSwitcher',\n\tdata: function data () {\n\t\treturn {\n\t\t\tcurrentUrl: this.url || this.$router.currentRoute.fullPath,\n\t\t\tlinks: [],\n\t\t};\n\t},\n\tprops: [ 'tag', 'active-class', 'url' ],\n\tcomputed: {\n\t\tlocale: function locale () {\n\t\t\treturn this.$i18n.locale;\n\t\t},\n\t},\n\tmethods: {\n\t\tgetTag: function getTag () {\n\t\t\tif (this.tag) { return this.tag; }\n\t\t\telse { return 'div'; }\n\t\t},\n\t\tgenerateLinks: function generateLinks () {\n\t\t\tvar links = [];\n\t\t\tvar activeClass = this.activeClass || 'router-active-language';\n\t\t\tvar tr = this._langRouter.translations;\n\t\t\tfor (var lang in tr) {\n\t\t\t\tif (tr.hasOwnProperty(lang)) {\n\t\t\t\t\tlinks.push({\n\t\t\t\t\t\tactiveClass: (lang == this.locale ? activeClass : ''),\n\t\t\t\t\t\tlangIndex: lang,\n\t\t\t\t\t\tlangName: tr[lang].name || lang,\n\t\t\t\t\t\turl: this.$localizePath(this.currentUrl, lang),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.links = links;\n\t\t},\n\t\tdetectRouterLinkClick: function detectRouterLinkClick (e) {\n\t\t\tvar this$1 = this;\n\t\t\tif (!e.defaultPrevented) { return; }\n\t\t\tvar a = e.target;\n\t\t\twhile (a.tagName.toLowerCase() != 'a') {\n\t\t\t\tif (a.classList.contains('router-language-switcher')) { return; }\n\t\t\t\ta = a.parentNode;\n\t\t\t}\n\t\t\tif (a.pathname == window.location.pathname) { return; }\n\t\t\tvar currentRoute = this.$route.matched[this.$route.matched.length - 1];\n\t\t\tif (currentRoute.aliasOf) { currentRoute = currentRoute.aliasOf; }\n\t\t\tvar resolvedRoute = this.$router.resolve(a.pathname);\n\t\t\tif (resolvedRoute.matched.length == 0) { return; }\n\t\t\tresolvedRoute = resolvedRoute.matched[resolvedRoute.matched.length - 1];\n\t\t\tif (resolvedRoute.aliasOf) { resolvedRoute = resolvedRoute.aliasOf; }\n\t\t\tif (currentRoute == resolvedRoute) {\n\t\t\t\tvar newRoute = a.pathname + a.search + a.hash;\n\t\t\t\tvar historyState = Object.assign({}, window.history.state, {current: newRoute});\n\t\t\t\tvar newLocale = a.pathname.split('/')[1];\n\t\t\t\tthis._langRouter.loadLanguage(newLocale).then(function () {\n\t\t\t\t\twindow.history.replaceState(historyState, '', newRoute);\n\t\t\t\t\tthis$1._langRouter.forcedNewRoute.value = newRoute;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t$route: function $route (to) {\n\t\t\tthis.currentUrl = this.url || to.fullPath;\n\t\t\tthis.generateLinks();\n\t\t},\n\t\tlocale: function locale () {\n\t\t\tif (typeof this.currentUrl !== 'undefined') { this.generateLinks(); }\n\t\t},\n\t},\n\tmounted: function mounted () {\n\t\tvar this$1 = this;\n\t\tif (typeof this.currentUrl !== 'undefined') { this.generateLinks(); }\n\t\twatch(this._langRouter.forcedNewRoute, function (to) {\n\t\t\tthis$1.currentUrl = to;\n\t\t\tthis$1.generateLinks();\n\t\t});\n\t},\n};\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return (openBlock(), createBlock(resolveDynamicComponent($options.getTag()), {\n    class: \"router-language-switcher\",\n    onClick: $options.detectRouterLinkClick\n  }, {\n    default: withCtx(function () { return [\n      renderSlot(_ctx.$slots, \"default\", { links: $data.links })\n    ]; }),\n    _: 3\n  }, 8 , [\"onClick\"]))\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"src/plugin/components/LanguageSwitcher.vue\";\n\nvar defaultLanguage, translations, localizedURLs, i18n;\nvar isInstalled = false;\nvar loadedTranslations = [];\nfunction err (msg, error) {\n\tconsole.error('LangRouter: ' + msg);\n\tif (typeof error !== 'undefined') { console.error(error); }\n}\nfunction createLangRouter (languageOptions, routerOptions) {\n\tsetupLanguageConfig(languageOptions);\n\tfor (var lang in translations) {\n\t\tif (translations.hasOwnProperty(lang) && !localizedURLs[lang]) {\n\t\t\tlocalizedURLs[lang] = {};\n\t\t}\n\t}\n\tfor (var lang$1 in localizedURLs) {\n\t\tif (localizedURLs.hasOwnProperty(lang$1)) {\n\t\t\taddAliasesToRoutes(routerOptions.routes, lang$1);\n\t\t}\n\t}\n\tvar router = createRouter(routerOptions);\n\trouter.beforeEach(switchLanguage);\n\tvar installRouter = router.install;\n\trouter.install = function (app, options) {\n\t\tinstallRouter.call(this, app, options);\n\t\tinstallLangRouter.call(this, app);\n\t};\n\treturn router;\n}\nfunction setupLanguageConfig (options) {\n\tif (!options) {\n\t\terr('Options missing.');\n\t}\n\tdefaultLanguage = options.defaultLanguage;\n\ttranslations = options.translations;\n\tlocalizedURLs = options.localizedURLs || {};\n\tvar isArr;\n\tif ((isArr = Array.isArray(translations)) || typeof translations !== 'object') {\n\t\terr('options.translations should be an object, received ' + (isArr ? 'array' : typeof translations) + ' instead.');\n\t}\n\tif ((isArr = Array.isArray(localizedURLs)) || typeof localizedURLs !== 'object') {\n\t\terr('options.localizedURLs should be an object, received ' + (isArr ? 'array' : typeof localizedURLs) + ' instead.');\n\t}\n\tif (typeof defaultLanguage !== 'string') {\n\t\terr('options.defaultLanguage should be a string, received ' + typeof defaultLanguage + ' instead.');\n\t}\n\tvar messages = {};\n\tfor (var lang in translations) {\n\t\tif (translations.hasOwnProperty(lang)) {\n\t\t\tvar langMessages = translations[lang].messages;\n\t\t\tif (typeof langMessages === 'object' && !Array.isArray(langMessages)) {\n\t\t\t\tmessages[lang] = translations[lang].messages;\n\t\t\t\tloadedTranslations.push(lang);\n\t\t\t}\n\t\t}\n\t}\n\ti18n = createI18n(Object.assign({}, {legacy: true,\n\t\tlocale: defaultLanguage,\n\t\tfallbackLocale: defaultLanguage,\n\t\tmessages: messages},\n\t\toptions.i18nOptions));\n}\nfunction installLangRouter (app) {\n\tif (isInstalled) {\n\t\terr('Already installed.');\n\t\treturn;\n\t}\n\tisInstalled = true;\n\tapp.config.globalProperties._langRouter = {\n\t\ttranslations: translations,\n\t\tloadLanguage: loadLanguage,\n\t\tforcedNewRoute: ref(''),\n\t};\n\tapp.config.globalProperties.$localizePath = localizePath;\n\tapp.component('localized-link', script);\n\tapp.component('language-switcher', script$1);\n}\nfunction setLanguage (lang) {\n\ti18n.global.locale = lang;\n\tdocument.querySelector('html').setAttribute('lang', lang);\n\tlocalStorage.setItem('VueAppLanguage', lang);\n\treturn lang;\n}\nfunction loadLanguage (lang) {\n\tif (loadedTranslations.includes(lang)) {\n\t\treturn Promise.resolve(setLanguage(lang));\n\t}\n\tif (!translations[lang] || typeof translations[lang].load !== 'function') {\n\t\terr('Unable to load translations for \"' + lang + '\", \"load\" function is missing!');\n\t}\n\treturn translations[lang].load().then(function (messages) {\n\t\ti18n.global.setLocaleMessage(lang, messages.default || messages);\n\t\tloadedTranslations.push(lang);\n\t\treturn setLanguage(lang);\n\t}).catch(function (error) {\n\t\terr('Failed to load \"' + lang + '\" translation.', error);\n\t});\n}\nfunction addAliasesToRoutes (routes, lang, child) {\n\troutes.forEach(function (route) {\n\t\tvar alias = translatePath(route.path, lang);\n\t\tif (!child) { alias = '/' + lang + (alias.charAt(0) != '/' ? '/' : '') + alias; }\n\t\tif (route.alias) {\n\t\t\tif (!Array.isArray(route.alias)) { route.alias = [ route.alias ]; }\n\t\t}\n\t\telse { route.alias = []; }\n\t\tif (route.path != alias && route.alias.indexOf(alias) == -1) { route.alias.push(alias); }\n\t\tif (route.children) { addAliasesToRoutes(route.children, lang, true); }\n\t});\n}\nfunction switchLanguage (to, from, next) {\n\tvar lang = to.path.split('/')[1];\n\tif (!translations[lang]) {\n\t\tvar savedLang = localStorage.getItem('VueAppLanguage');\n\t\tif (savedLang && translations[savedLang]) { lang = savedLang; }\n\t\telse {\n\t\t\tvar preferredLang = getPrefferedLanguage();\n\t\t\tif (preferredLang && translations[preferredLang]) { lang = preferredLang; }\n\t\t\telse { lang = defaultLanguage; }\n\t\t}\n\t\tif (lang != defaultLanguage) {\n\t\t\tvar translatedPath = translatePath(to.path, lang);\n\t\t\ttranslatedPath = '/' + lang + (translatedPath.charAt(0) != '/' ? '/' : '') + translatedPath;\n\t\t\treturn next({ path: translatedPath, query: to.query, hash: to.hash });\n\t\t}\n\t}\n\tloadLanguage(lang).then(function () {\n\t\treturn next();\n\t});\n}\nfunction translatePath (path, langTo, langFrom, matchedPath) {\n\tvar pathChunks = path.split('/');\n\tif (langFrom && localizedURLs[langFrom]) {\n\t\tif (langTo == langFrom) { return path; }\n\t\tvar map = localizedURLs[langFrom];\n\t\tvar reversedMap = {};\n\t\tObject.keys(map).forEach(function (key) {\n\t\t\treversedMap[map[key]] = key;\n\t\t});\n\t\tvar matchedPathChunks = matchedPath.split('/');\n\t\tfor (var i = 0; i < pathChunks.length; i++) {\n\t\t\tvar pathChunk = pathChunks[i];\n\t\t\tif (matchedPathChunks[i].charAt(0) == ':') { continue; }\n\t\t\tpathChunks[i] = reversedMap[pathChunk] || pathChunk;\n\t\t}\n\t}\n\tfor (var i$1 = 0; i$1 < pathChunks.length; i$1++) {\n\t\tvar pathChunk$1 = pathChunks[i$1];\n\t\tif (pathChunk$1.charAt(0) == ':') { continue; }\n\t\tpathChunks[i$1] = localizedURLs[langTo][pathChunk$1] || pathChunk$1;\n\t}\n\treturn pathChunks.join('/');\n}\nfunction getPrefferedLanguage () {\n\tfunction extractLanguage (s) {\n\t\treturn s.split('-')[0].toLowerCase();\n\t}\n\tif (navigator.languages && navigator.languages.length) { return extractLanguage(navigator.languages[0] || ''); }\n\treturn extractLanguage(navigator.language || navigator.browserLanguage || navigator.userLanguage || '');\n}\nfunction localizePath (fullPath, lang) {\n\tif (!lang || !localizedURLs[lang]) { lang = i18n.global.locale; }\n\tvar path = fullPath;\n\tvar query = '';\n\tif (fullPath.includes('?')) {\n\t\tpath = fullPath.split('?')[0];\n\t\tquery = '?' + fullPath.split('?')[1];\n\t}\n\telse if (fullPath.includes('#')) {\n\t\tpath = fullPath.split('#')[0];\n\t\tquery = '#' + fullPath.split('#')[1];\n\t}\n\tvar pathChunks = path.split('/');\n\tvar pathLang = (localizedURLs[pathChunks[1]] ? pathChunks[1] : false);\n\tvar currentPathLang = this.$route.path.split('/')[1];\n\tif (lang == defaultLanguage && !localizedURLs[currentPathLang] && !pathLang) { return fullPath; }\n\tvar resolvedPath = false;\n\tif (pathLang) {\n\t\tvar resolvedRoute = this.$router.resolve(path);\n\t\tif (resolvedRoute.matched.length != 0) {\n\t\t\tresolvedPath = resolvedRoute.matched[resolvedRoute.matched.length - 1];\n\t\t\tresolvedPath = (resolvedPath.aliasOf ? resolvedPath.aliasOf.path : resolvedPath.path);\n\t\t\tresolvedPath = (resolvedPath.charAt(0) == '/' ? resolvedPath : '/' + resolvedPath);\n\t\t}\n\t\telse {\n\t\t\terr('Router could not resolve path \"' + path + '\". URL localization may not work as expected.');\n\t\t}\n\t\tpathChunks.splice(1, 1);\n\t\tpath = pathChunks.join('/');\n\t}\n\tvar translatedPath = translatePath(path, lang, pathLang, (resolvedPath || path));\n\ttranslatedPath = '/' + lang + (translatedPath.charAt(0) != '/' ? '/' : '') + translatedPath;\n\treturn translatedPath + query;\n}\nvar jestAccess = function () { return true; };\n\nexport default jestAccess;\nexport { createLangRouter, i18n };\n"]},"metadata":{},"sourceType":"module"}